---
title: 容器网络
p: system_management/容器网络
date: 2019-08-30 20:14:40
tags: [docker, overlay network]
categories: System
---

## 网关
负责转发源ip地址的请求到目标ip地址。当路由表中将网关设置为`0.0.0.0`时，表示源ip地址直连网卡。

## 跨主机网络 - overlay network
### flannel
基于UDP的跨主机通信的基本原理如图所示：
![](img/flannel-udp-network.png)
可以看到每次数据从一个主机发出去的之前会进行三次用户态和内核态的切换(container0 - docker0, flannel0 - flanneld, flanneld - eth0)，非常耗时。所以后来被VXLAN（虚拟可扩展局域网）所取代，如图所示：
![](img/flannel-network.png)